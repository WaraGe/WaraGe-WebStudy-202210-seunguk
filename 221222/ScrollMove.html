<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      #wrapper {
        width: 100%;
      }

      #header {
        width: 100%;
        height: 900px;
        background-color: yellowgreen;
      }

      #header > div {
        float: left;
        margin: 50px 20px;
        width: 300px;
        height: 300px;
        opacity: 1;
        border: 1px solid #000;
        transform: translateY(100px);
        transition: all 0.5s;
      }

      #header.active > div {
        transform: translateY(0px);
        opacity: 1;
      }

      #header > div.type1 {
        transition-delay: 0s;
      }
      #header > div.type2 {
        transition-delay: 1s;
      }
      #header > div.type3 {
        transition-delay: 2s;
      }

      /* page1 */
      #page1 {
        width: 100%;
        height: 900px;
        background-color: plum;
      }
      #page1 > div {
        float: left;
        margin: 50px 20px;
        width: 300px;
        height: 300px;
        opacity: 1;
        border: 1px solid #000;
        transform: translateY(100px);
        transition: all 0.5s;
      }
      #page1.active > div {
        transform: translateY(0px);
        opacity: 1;
      }

      #page1 > div.type1 {
        transition-delay: 0s;
      }
      #page1 > div.type2 {
        transition-delay: 1s;
      }
      #page1 > div.type3 {
        transition-delay: 2s;
      }
      /* page2 */
      #page2 {
        width: 100%;
        height: 900px;
        background-color: darkslateblue;
      }
      #page2 > div {
        float: left;
        margin: 50px 20px;
        width: 300px;
        height: 300px;
        opacity: 1;
        border: 1px solid #000;
        transform: translateY(100px);
        transition: all 0.5s;
      }
      #page2.active > div {
        transform: translateY(0px);
        opacity: 1;
      }

      #page2 > div.type1 {
        transition-delay: 0s;
      }
      #page2 > div.type2 {
        transition-delay: 1s;
      }
      #page2 > div.type3 {
        transition-delay: 2s;
      }
    </style>
    <script>
      window.addEventListener("load", function () {
        const wrapper = document.querySelector("#wrapper");
        const content = wrapper.children; // header밑에 있는 모든 요소

        let t = window.pageYOffset; // windows 상단 위치 변수를 의미
        let offsety = []; // 위치 이동 배열
        let n = 0; // 현재 컨텐츠의 인덱스(카테고리 번호 변수)

        for (let i = 0; i < content.length; i++) {
          offsety.push(content[i].offsetTop); // content의 각각의 높이값이 저장
        }
        content[n].classList.add("active"); // 첫번째  콘텐츠에 클래스 적용으로 애니메이션 시작

        window.addEventListener("scroll", () => {
          // 위치값에 의한 움직임
          let t = window.pageYOffset; // windows 상단 위치 변수를 의미
          // console.log(`윈도우의 상단 위치: ${t}`);
          if (t < offsety[1]) {
            //page1번의 높이
            n = 0;
          } else if (t < offsety[2]) {
            //page2번의 높이
            n = 1;
            if( t == (document.body.clientHeight - window.innerHeight)) {
                n = 2;
            }
          } else {
            n = 2; 
          }
          for (let j = 0; j < content.length; j++) {
            // 전체 content를 싱행하고
            if (j == n) { // 스크롤에 의해 추출된 n과 content의 인덱스값을 비교
              content[j].classList.add("active");
            } else {
              content[j].classList.remove("active");
            }
          }
        });
      });
    </script>
  </head>

  <body>
    <div id="wrapper">
      <header id="header">
        <div class="type1">type1</div>
        <div class="type2">type2</div>
        <div class="type3">type3</div>
      </header>
      <section id="page1">
        <div class="type1">type1</div>
        <div class="type2">type2</div>
        <div class="type3">type3</div>
      </section>
      <section id="page2">
        <div class="type1">type1</div>
        <div class="type2">type2</div>
        <div class="type3">type3</div>
      </section>
    </div>
  </body>
</html>
